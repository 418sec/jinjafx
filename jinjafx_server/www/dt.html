<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=Edge">
    <meta name="viewport" content="width=1024, user-scalable=no">
    <title>DataTemplate</title>
    <link rel="shortcut icon" href="jinjafx.png">
    <script>
      window.onload = function() {
        var dt = window.opener.dt;
        window.opener.reset_dt();

        if (Object.keys(dt).length !== 0) {
          dt.data = dt.data.match(/\S/) ? dt.data.replace(/\s+$/g, '') : "";
          dt.template = dt.template.match(/\S/) ? dt.template.replace(/\s+$/g, '') : "";
          dt.vars = dt.vars.match(/\S/) ? dt.vars.replace(/\s+$/g, '') : "";

          var dtx = '<span style="color: #0074D9;"># JinjaFx DataTemplate\n# https://github.com/cmason3/jinjafx</span>\n\n';

          dtx += '---\n';
          dtx += 'dt:\n';

          if (dt.data == '') {
            dtx += '  data: ""\n\n';
          }
          else {
            dtx += '  data: |2\n';
            dtx += window.opener.quote(dt.data.replace(/^/gm, '    ')) + '\n\n';
          }

          if (dt.template == '') {
            dtx += '  template: ""\n\n';
          }
          else {
            dtx += '  template: |2\n';
            dtx += window.opener.quote(dt.template.replace(/^/gm, '    ')) + '\n\n';
          }

          if (dt.vars == '') {
            dtx += '  vars: ""\n';
          }
          else {
            dtx += '  vars: |2\n';
            dtx += window.opener.quote(dt.vars.replace(/^/gm, '    ')) + '\n';
          }

          document.body.innerHTML = "<pre>" + dtx + "</pre>";
        }
      };
    </script>
  </head>
</html>
